@inject HttpClient Http
@inject DialogService DialogService

<RadzenCard>
    <RadzenRow>
        <RadzenColumn>
            <RadzenDropDown TValue="int" @bind-Value="exerciseId" Data="@exercises" TextProperty="Name" ValueProperty="Id" />
        </RadzenColumn>
    </RadzenRow>
    <RadzenRow>
        <RadzenColumn>
            <RadzenButton Click=@Create >Create</RadzenButton>
        </RadzenColumn>
    </RadzenRow>
</RadzenCard>


@code {
    private List<Exercise> exercises = new List<Exercise>();
    int exerciseId;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            exercises = await Http.GetFromJsonAsync<List<Exercise>>($"api/Exercises");
            StateHasChanged();
        }
        catch (AccessTokenNotAvailableException exception)
        {
            exception.Redirect();
        }
    }

    private void Create()
    {
        DialogService.Close(exercises.Find(x => x.Id == exerciseId));
    }
}
